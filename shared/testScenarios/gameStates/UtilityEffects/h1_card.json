{
  "gameId": "h1_true_gameplay_simulation",
  "description": "True gameplay simulation: Player 1 plays character, Player 2 plays h-2 targeting opponent, Player 1 plays h-1 to neutralize h-2",
  "testType": "sequential_gameplay",
  "initialGameEnv": {
    "phase": "MAIN_PHASE",
    "round": 1,
    "gameStarted": true,
    "currentPlayer": "playerId_1",
    "currentTurn": 0,
    "firstPlayer": 0,
    "players": {
      "playerId_1": {
        "id": "playerId_1",
        "name": "Player 1",
        "deck": {
          "hand": [
            "c-1",
            "h-1",
            "c-2",
            "c-3",
            "c-4"
          ],
          "mainDeck": [
            "c-5",
            "c-6",
            "c-7",
            "c-8",
            "c-9",
            "c-10",
            "c-11",
            "c-12",
            "c-13",
            "c-14",
            "c-15",
            "c-16",
            "h-3",
            "h-4",
            "sp-1",
            "sp-2",
            "sp-3"
          ],
          "leader": [
            "s-1",
            "s-2",
            "s-3",
            "s-4"
          ],
          "currentLeaderIdx": 0
        },
        "isReady": true,
        "redraw": 1,
        "turnAction": [],
        "playerPoint": 0,
        "fieldEffects": {
          "zoneRestrictions": {},
          "activeEffects": [],
          "specialEffects": {},
          "calculatedPowers": {},
          "disabledCards": [],
          "victoryPointModifiers": 0
        }
      },
      "playerId_2": {
        "id": "playerId_2",
        "name": "Player 2",
        "deck": {
          "hand": [
            "h-2",
            "c-17",
            "c-18",
            "c-19",
            "c-20"
          ],
          "mainDeck": [
            "c-21",
            "c-22",
            "c-23",
            "c-24",
            "c-25",
            "c-26",
            "c-27",
            "c-28",
            "c-29",
            "c-30",
            "c-31",
            "c-32",
            "c-33",
            "h-5",
            "h-6",
            "h-7",
            "sp-4",
            "sp-5",
            "sp-6"
          ],
          "leader": [
            "s-2",
            "s-3",
            "s-4",
            "s-5"
          ],
          "currentLeaderIdx": 0
        },
        "isReady": true,
        "redraw": 1,
        "turnAction": [],
        "playerPoint": 0,
        "fieldEffects": {
          "zoneRestrictions": {},
          "activeEffects": [],
          "specialEffects": {},
          "calculatedPowers": {},
          "disabledCards": [],
          "victoryPointModifiers": 0
        }
      }
    },
    "zones": {
      "playerId_1": {
        "leader": {
          "id": "s-1",
          "name": "特朗普",
          "cardType": "leader"
        },
        "top": [],
        "left": [],
        "right": [],
        "help": [],
        "sp": []
      },
      "playerId_2": {
        "leader": {
          "id": "s-2",
          "name": "拜登",
          "cardType": "leader"
        },
        "top": [],
        "left": [],
        "right": [],
        "help": [],
        "sp": []
      }
    },
    "gameEvents": [],
    "lastEventId": 0,
    "pendingPlayerAction": null,
    "pendingCardSelections": {},
    "playSequence": {
      "globalSequence": 0,
      "plays": []
    }
  },
  "gameplaySteps": [
    {
      "step": 1,
      "description": "Player 1 plays character card c-1 (愛國者) to LEFT zone",
      "playerId": "playerId_1",
      "action": {
        "type": "PlayCard",
        "card_idx": 0,
        "field_idx": 1
      },
      "expectedResult": {
        "success": true,
        "cardPlaced": "c-1",
        "zone": "left",
        "turnSwitches": true,
        "newCurrentPlayer": "playerId_2",
        "newPhase": "DRAW_PHASE"
      },
      "validation": {
        "checkZoneContents": {
          "playerId_1.zones.left": ["c-1"]
        },
        "checkGameState": {
          "phase": "DRAW_PHASE",
          "currentPlayer": "playerId_2"
        },
        "checkEvents": {
          "hasDrawPhaseCompleteEvent": true
        },
        "checkPlaySequence": {
          "playsCount": 1,
          "lastPlay": {
            "action": "PLAY_CARD",
            "cardId": "c-1",
            "playerId": "playerId_1",
            "zone": "left"
          }
        }
      }
    },
    {
      "step": 1.5,
      "description": "Acknowledge DRAW_PHASE_COMPLETE event to transition Player 2 to MAIN_PHASE",
      "playerId": "playerId_2",
      "action": {
        "type": "AcknowledgeEvents",
        "eventTypes": ["DRAW_PHASE_COMPLETE"]
      },
      "expectedResult": {
        "success": true,
        "eventsAcknowledged": 1,
        "newPhase": "MAIN_PHASE"
      },
      "validation": {
        "checkGameState": {
          "phase": "MAIN_PHASE",
          "currentPlayer": "playerId_2"
        },
        "checkEvents": {
          "noDrawPhaseCompleteEvents": true
        }
      }
    },
    {
      "step": 2,
      "description": "Player 2 plays h-2 to HELP zone, then selects opponent character c-1 to set power to 0",
      "playerId": "playerId_2",
      "action": {
        "type": "PlayCard",
        "card_idx": 0,
        "field_idx": 3
      },
      "expectedResult": {
        "success": true,
        "cardPlaced": "h-2",
        "zone": "help",
        "requiresSelection": true,
        "selectionType": "setPower"
      },
      "selectionAction": {
        "selectedCardIds": ["c-1"],
        "expectedEffect": {
          "targetCard": "c-1",
          "targetPlayer": "playerId_1", 
          "newPower": 0,
          "effectType": "setPower"
        }
      },
      "postSelectionExpected": {
        "turnSwitches": true,
        "newCurrentPlayer": "playerId_1",
        "newPhase": "DRAW_PHASE"
      },
      "validation": {
        "checkZoneContents": {
          "playerId_2.zones.help": ["h-2"]
        },
        "checkFieldEffects": {
          "playerId_1.fieldEffects.calculatedPowers.c-1": 0
        },
        "checkGameState": {
          "phase": "DRAW_PHASE",
          "currentPlayer": "playerId_1"
        },
        "checkEvents": {
          "hasDrawPhaseCompleteEvent": true
        },
        "checkPlaySequence": {
          "playsCount": 2,
          "lastPlay": {
            "action": "PLAY_CARD",
            "cardId": "h-2",
            "playerId": "playerId_2",
            "zone": "help"
          }
        }
      }
    },
    {
      "step": 2.5,
      "description": "Acknowledge DRAW_PHASE_COMPLETE event to transition Player 1 to MAIN_PHASE",
      "playerId": "playerId_1",
      "action": {
        "type": "AcknowledgeEvents",
        "eventTypes": ["DRAW_PHASE_COMPLETE"]
      },
      "expectedResult": {
        "success": true,
        "eventsAcknowledged": 1,
        "newPhase": "MAIN_PHASE"
      },
      "validation": {
        "checkGameState": {
          "phase": "MAIN_PHASE",
          "currentPlayer": "playerId_1"
        },
        "checkEvents": {
          "noDrawPhaseCompleteEvents": true
        }
      }
    },
    {
      "step": 3,
      "description": "Player 1 plays h-1 to HELP zone, then selects h-2 to neutralize Player 2's h-2 effect",
      "playerId": "playerId_1",
      "action": {
        "type": "PlayCard",
        "card_idx": 1,
        "field_idx": 3
      },
      "expectedResult": {
        "success": true,
        "cardPlaced": "h-1",
        "zone": "help",
        "requiresSelection": true,
        "selectionType": "neutralize"
      },
      "selectionAction": {
        "selectedCardIds": ["h-2"],
        "expectedEffect": {
          "targetCard": "h-2",
          "targetPlayer": "playerId_2",
          "effectType": "neutralize",
          "restoredPower": {
            "cardId": "c-1",
            "playerId": "playerId_1",
            "newPower": "basePower"
          }
        }
      },
      "validation": {
        "checkZoneContents": {
          "playerId_1.zones.help": ["h-1"]
        },
        "checkFieldEffects": {
          "playerId_1.fieldEffects.calculatedPowers": {},
          "playerId_2.fieldEffects.disabledCards": ["h-2"]
        },
        "checkPlaySequence": {
          "playsCount": 3,
          "lastPlay": {
            "action": "PLAY_CARD",
            "cardId": "h-1",
            "playerId": "playerId_1",
            "zone": "help"
          }
        },
        "checkCardPowers": {
          "c-1": "basePower"
        }
      }
    }
  ],
  "validationPoints": {
    "step1_character_placement": {
      "description": "Character card successfully placed in zone with proper turn switching",
      "expected": {
        "cardInZone": true,
        "playSequenceRecorded": true,
        "turnSwitched": true,
        "phaseTransition": "DRAW_PHASE",
        "eventGenerated": "DRAW_PHASE_COMPLETE"
      }
    },
    "step1_5_event_acknowledgment": {
      "description": "DRAW_PHASE_COMPLETE event acknowledged to transition to MAIN_PHASE",
      "expected": {
        "eventsAcknowledged": 1,
        "phaseTransition": "MAIN_PHASE",
        "noRemainingDrawEvents": true,
        "currentPlayerCorrect": true
      }
    },
    "step2_h2_effect_application": {
      "description": "H-2 requires selection and successfully applies setPower effect with proper phase transitions",
      "expected": {
        "selectionTriggered": true,
        "targetCardPowerSet": true,
        "effectInFieldEffects": true,
        "manualSelectionRequired": true,
        "turnSwitchedAfterSelection": true,
        "phaseTransitionAfterSelection": "DRAW_PHASE",
        "eventGeneratedAfterSelection": "DRAW_PHASE_COMPLETE"
      }
    },
    "step2_5_event_acknowledgment": {
      "description": "Second DRAW_PHASE_COMPLETE event acknowledged to transition Player 1 to MAIN_PHASE",
      "expected": {
        "eventsAcknowledged": 1,
        "phaseTransition": "MAIN_PHASE",
        "noRemainingDrawEvents": true,
        "currentPlayerCorrect": true
      }
    },
    "step3_h1_neutralization": {
      "description": "H-1 neutralizes H-2 and restores original power",
      "expected": {
        "selectionTriggered": true,
        "h2Neutralized": true,
        "powerRestored": true,
        "manualSelectionRequired": true,
        "h2InDisabledCards": true
      }
    },
    "complete_interaction": {
      "description": "Complete card interaction sequence with proper event acknowledgment workflow",
      "expected": {
        "emptyPlaySequenceStart": true,
        "fiveStepProgression": true,
        "properEventAcknowledgmentFlow": true,
        "properPhaseTransitions": true,
        "properEffectApplicationAndRemoval": true,
        "fieldEffectsIntegrity": true
      }
    },
    "event_acknowledgment_pattern": {
      "description": "Event acknowledgment pattern works correctly throughout gameplay",
      "expected": {
        "drawPhaseEventsGenerated": 2,
        "drawPhaseEventsAcknowledged": 2,
        "phaseTransitionsCorrect": true,
        "noEventLeakage": true,
        "currentPlayerAlwaysCorrect": true
      }
    }
  }
}