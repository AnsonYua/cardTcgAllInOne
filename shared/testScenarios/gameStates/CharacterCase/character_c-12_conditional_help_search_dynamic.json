{
  "gameId": "character_c-12_conditional_help_search_dynamic",
  "description": "Dynamic test for c-12 (盧克) conditional Help search: 7 cards → Help zone if empty, otherwise hand",
  "testType": "dynamic",
  "initialGameEnv": {
    "phase": "MAIN_PHASE",
    "round": 1,
    "gameStarted": true,
    "currentPlayer": "playerId_1",
    "currentTurn": 0,
    "firstPlayer": 0,
    "players": {
      "playerId_1": {
        "id": "playerId_1",
        "name": "playerId_1",
        "deck": {
          "hand": ["c-12", "c-1", "c-5", "h-1", "sp-1"],
          "mainDeck": ["h-2", "h-3", "c-6", "c-7", "c-8", "c-2", "c-10", "c-11", "c-9", "c-13", "c-14", "c-15", "c-16", "c-17", "c-18", "c-19", "c-20", "h-4", "sp-2", "sp-3"],
          "leader": ["s-2", "s-3", "s-4", "s-5"],
          "currentLeaderIdx": 0
        },
        "isReady": true,
        "redraw": 1,
        "turnAction": [],
        "playerPoint": 0
      },
      "playerId_2": {
        "id": "playerId_2",
        "name": "playerId_2",
        "deck": {
          "hand": ["c-21", "c-22", "c-23", "h-5", "sp-1"],
          "mainDeck": ["c-24", "c-25", "c-26", "c-27", "c-28", "c-10", "c-3", "c-4", "c-11", "c-12", "c-13", "c-14", "c-15", "h-1", "h-2", "h-3", "sp-2", "sp-3"],
          "leader": ["s-2", "s-3", "s-4", "s-5"],
          "currentLeaderIdx": 0
        },
        "isReady": true,
        "redraw": 1,
        "turnAction": [],
        "playerPoint": 0
      }
    },
    "zones": {
      "playerId_1": {
        "leader": {
          "id": "s-2",
          "name": "拜登",
          "cardType": "leader",
          "gameType": "左翼",
          "initialPoint": 100,
          "level": 7,
          "rarity": "legendary",
          "zoneCompatibility": {
            "top": ["左翼", "自由", "經濟", "右翼", "愛國者"],
            "left": ["左翼", "自由", "經濟", "右翼", "愛國者"],
            "right": ["左翼", "自由", "經濟", "右翼", "愛國者"]
          },
          "effects": {
            "description": "全部召喚出來的角色能力值 +40",
            "rules": [
              {
                "id": "biden_all_boost",
                "type": "continuous",
                "trigger": {
                  "event": "always",
                  "conditions": []
                },
                "target": {
                  "owner": "self",
                  "zones": ["top", "left", "right"],
                  "filters": []
                },
                "effect": {
                  "type": "powerBoost",
                  "value": 40
                }
              }
            ]
          }
        },
        "top": [],
        "left": [],
        "right": [],
        "help": [],
        "sp": []
      },
      "playerId_2": {
        "leader": {
          "id": "s-2",
          "name": "拜登",
          "cardType": "leader",
          "gameType": "左翼",
          "initialPoint": 100,
          "level": 7,
          "rarity": "legendary",
          "zoneCompatibility": {
            "top": ["左翼", "自由", "經濟", "右翼", "愛國者"],
            "left": ["左翼", "自由", "經濟", "右翼", "愛國者"],
            "right": ["左翼", "自由", "經濟", "右翼", "愛國者"]
          },
          "effects": {
            "description": "全部召喚出來的角色能力值 +40",
            "rules": [
              {
                "id": "biden_all_boost",
                "type": "continuous",
                "trigger": {
                  "event": "always",
                  "conditions": []
                },
                "target": {
                  "owner": "self",
                  "zones": ["top", "left", "right"],
                  "filters": []
                },
                "effect": {
                  "type": "powerBoost",
                  "value": 40
                }
              }
            ]
          }
        },
        "top": [],
        "left": [],
        "right": [],
        "help": [],
        "sp": []
      }
    },
    "gameEvents": [],
    "lastEventId": 1,
    "pendingPlayerAction": null,
    "pendingCardSelections": {},
    "playSequence": {
      "globalSequence": 0,
      "plays": []
    },
    "computedState": {
      "playerPowers": {},
      "activeRestrictions": {},
      "disabledCards": [],
      "victoryPointModifiers": {}
    }
  },
  "playerActions": [
    {
      "step": 1,
      "description": "Player 1 summons c-12 (盧克) to trigger conditional Help search (Help zone empty)",
      "playerId": "playerId_1",
      "action": {
        "actionType": "PlayCard",
        "cardId": "c-12",
        "zone": "top"
      },
      "expectedResult": {
        "success": true,
        "noError": true,
        "cardPlaced": true,
        "requiresCardSelection": true
      },
      "expectedEffects": [
        "c-12 placed in TOP zone",
        "Search effect triggers: look at 7 cards from deck",
        "Only Help cards shown for selection",
        "Help zone is empty, so selected card will go to Help zone"
      ]
    },
    {
      "step": 2,
      "description": "Player 1 completes card selection (selects h-2 from searched Help cards)",
      "playerId": "playerId_1",
      "action": {
        "actionType": "SelectCard",
        "selectionId": "auto-generated",
        "selectedCardIds": ["h-2"]
      },
      "expectedResult": {
        "success": true,
        "noError": true,
        "selectionCompleted": true
      },
      "expectedEffects": [
        "h-2 placed in Help zone (since Help zone was empty)",
        "Help card effects trigger if applicable",
        "Remaining 6 searched cards placed at bottom of deck",
        "pendingPlayerAction cleared"
      ]
    },
    {
      "step": 3,
      "description": "Player 2 places a card (turn switches)",
      "playerId": "playerId_2",
      "action": {
        "actionType": "PlayCard",
        "cardId": "c-21",
        "zone": "top"
      },
      "expectedResult": {
        "success": true,
        "noError": true,
        "cardPlaced": true
      },
      "expectedEffects": [
        "c-21 placed in TOP zone",
        "Biden leader effect applies +40 power boost"
      ]
    },
    {
      "step": 4,
      "description": "Player 1 summons another c-12 to test Help zone occupied scenario",
      "playerId": "playerId_1",
      "action": {
        "actionType": "PlayCard",
        "cardId": "c-11",
        "zone": "left"
      },
      "expectedResult": {
        "success": true,
        "noError": true,
        "cardPlaced": true
      },
      "expectedEffects": [
        "c-11 placed in LEFT zone",
        "Biden leader effect applies +40 power boost"
      ]
    }
  ],
  "expectedStateChanges": {
    "zones.playerId_1.top.length": 1,
    "zones.playerId_1.help.length": 1,
    "zones.playerId_2.top.length": 1,
    "zones.playerId_1.left.length": 1,
    "players.playerId_1.deck.hand.length": 3,
    "players.playerId_2.deck.hand.length": 4,
    "players.playerId_1.deck.mainDeck.length": 18,
    "playSequence.plays.length": 4,
    "currentTurn": 3,
    "currentPlayer": "playerId_1",
    "pendingPlayerAction": null,
    "pendingCardSelections": {}
  },
  "validationPoints": {
    "playerId_1_card_c-12_power": {
      "description": "Validate c-12 power with Biden leader boost",
      "expected": {
        "cardId": "c-12",
        "finalPower": 90
      },
      "powerBreakdown": {
        "basePower": 50,
        "bidenLeaderBoost": 40,
        "total": 90
      }
    },
    "playerId_1_help_zone_card": {
      "description": "Validate that h-2 was placed in Help zone (conditional logic)",
      "expected": {
        "helpZoneCard": "h-2",
        "helpZoneLength": 1,
        "placement": "helpZone"
      }
    },
    "conditional_help_logic": {
      "description": "Validate conditional placement logic worked correctly",
      "expected": {
        "helpZoneWasEmpty": true,
        "cardPlacedInHelpZone": true,
        "cardNotInHand": true
      }
    }
  },
  "errorCases": [
    {
      "description": "Test selecting non-Help card during Help search",
      "playerId": "playerId_1",
      "action": {
        "actionType": "SelectCard",
        "selectionId": "auto-generated",
        "selectedCardIds": ["c-6"]
      },
      "expectedError": "INVALID_CARD_SELECTION"
    }
  ],
  "cardSelectionTests": [
    {
      "description": "Verify conditional Help search workflow",
      "triggerAction": {
        "actionType": "PlayCard",
        "cardId": "c-12",
        "zone": "top"
      },
      "expectedSelectionData": {
        "searchCount": 7,
        "selectCount": 1,
        "destination": "conditionalHelpZone",
        "filters": [
          {
            "type": "cardType",
            "value": "help"
          }
        ]
      }
    }
  ],
  "conditionalTests": [
    {
      "description": "Test Help zone empty condition",
      "condition": "helpZoneEmpty",
      "expectedBehavior": "selectedCardToHelpZone"
    },
    {
      "description": "Test Help zone occupied condition (if tested separately)",
      "condition": "helpZoneOccupied", 
      "expectedBehavior": "selectedCardToHand"
    }
  ],
  "cardDefinitions": {
    "c-12": {
      "name": "盧克",
      "cardType": "character",
      "gameType": "愛國者",
      "power": 50,
      "traits": [],
      "effects": {
        "description": "當這個卡登場時，可以從自己的卡組上面查看7張卡片，如HELP 卡區域為空，選出一張HELP卡 打出到 HELP 卡區，其餘放到卡組之下。",
        "rules": [
          {
            "id": "luke_conditional_help_search",
            "type": "triggered",
            "trigger": {
              "event": "onSummon",
              "conditions": []
            },
            "target": {
              "owner": "self",
              "zones": [],
              "filters": []
            },
            "effect": {
              "type": "searchCard",
              "searchCount": 7,
              "selectCount": 1,
              "destination": "conditionalHelpZone",
              "filters": [
                {
                  "type": "cardType",
                  "value": "help"
                }
              ]
            }
          }
        ]
      }
    },
    "c-11": {
      "name": "Test Character",
      "cardType": "character",
      "gameType": "愛國者",
      "power": 70,
      "traits": [],
      "effects": {
        "description": "No special effects",
        "rules": []
      }
    },
    "c-21": {
      "name": "奧巴馬",
      "cardType": "character",
      "gameType": "左翼",
      "power": 80,
      "traits": ["Deep State"],
      "effects": {
        "description": "所有角色卡原能力值加 +50 (只適用在某一張角色卡上，我方優先)",
        "rules": [
          {
            "id": "obama_single_boost",
            "type": "continuous",
            "trigger": {
              "event": "always",
              "conditions": []
            },
            "target": {
              "owner": "both",
              "zones": ["top", "left", "right"],
              "filters": [],
              "targetCount": 1
            },
            "effect": {
              "type": "powerBoost",
              "value": 50
            }
          }
        ]
      }
    },
    "h-2": {
      "name": "Big Tech",
      "cardType": "help",
      "gameType": "自由",
      "power": 0,
      "traits": [],
      "effects": {
        "description": "幫助卡效果",
        "rules": []
      }
    }
  }
}