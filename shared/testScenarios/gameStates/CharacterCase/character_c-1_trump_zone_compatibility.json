{
  "gameId": "character_c-1_trump_zone_compatibility",
  "description": "Zone compatibility test for c-1 (總統特朗普, 愛國者 gameType) with Trump leader (s-1) - Testing error on invalid zone and power calculation on valid zone",
  "testType": "dynamic",
  "initialGameEnv": {
    "phase": "MAIN_PHASE",
    "round": 1,
    "gameStarted": true,
    "currentPlayer": "playerId_1",
    "currentTurn": 0,
    "firstPlayer": 0,
    "players": {
      "playerId_1": {
        "id": "playerId_1",
        "name": "Player 1",
        "deck": {
          "hand": ["c-1", "h-1", "c-2", "c-3", "c-4"],
          "mainDeck": [
            "c-5", "c-6", "c-7", "c-8", "c-9", "c-10", 
            "c-11", "c-12", "c-13", "c-14", "c-15", "c-16",
            "h-3", "h-4", "sp-1", "sp-2", "sp-3"
          ],
          "leader": ["s-1", "s-2", "s-3", "s-4"],
          "currentLeaderIdx": 0
        },
        "isReady": true,
        "redraw": 1,
        "turnAction": [],
        "playerPoint": 0,
        "fieldEffects": {
          "zoneRestrictions": {
            "TOP": ["右翼", "自由", "經濟"],
            "LEFT": ["右翼", "自由", "愛國者"],
            "RIGHT": ["右翼", "愛國者", "經濟"],
            "HELP": ["ALL"],
            "SP": ["ALL"]
          },
          "activeEffects": [
            {
              "effectId": "s-1_powerBoost",
              "source": "s-1",
              "sourcePlayerId": "playerId_1",
              "type": "powerBoost",
              "target": {
                "scope": "SELF",
                "zones": ["top", "left", "right"],
                "gameTypes": ["右翼", "愛國者"]
              },
              "value": 45,
              "priority": 0,
              "unremovable": false
            },
            {
              "effectId": "s-1_setPower",
              "source": "s-1",
              "sourcePlayerId": "playerId_1",
              "type": "setPower",
              "target": {
                "scope": "SELF",
                "zones": ["top", "left", "right"],
                "gameTypes": ["經濟"]
              },
              "value": 0,
              "priority": 0,
              "unremovable": false
            }
          ],
          "specialEffects": {},
          "calculatedPowers": {},
          "disabledCards": [],
          "victoryPointModifiers": 0
        }
      },
      "playerId_2": {
        "id": "playerId_2",
        "name": "Player 2",
        "deck": {
          "hand": ["h-2", "c-17", "c-18", "c-19", "c-20"],
          "mainDeck": [
            "c-21", "c-22", "c-23", "c-24", "c-25", "c-26",
            "c-27", "c-28", "c-29", "c-30", "c-31", "c-32", "c-33",
            "h-5", "h-6", "h-7", "sp-4", "sp-5", "sp-6"
          ],
          "leader": ["s-2", "s-3", "s-4", "s-5"],
          "currentLeaderIdx": 0
        },
        "isReady": true,
        "redraw": 1,
        "turnAction": [],
        "playerPoint": 0,
        "fieldEffects": {
          "zoneRestrictions": {
            "TOP": ["左翼", "自由", "經濟", "右翼", "愛國者"],
            "LEFT": ["左翼", "自由", "經濟", "右翼", "愛國者"],
            "RIGHT": ["左翼", "自由", "經濟", "右翼", "愛國者"],
            "HELP": ["ALL"],
            "SP": ["ALL"]
          },
          "activeEffects": [
            {
              "effectId": "s-2_powerBoost",
              "source": "s-2",
              "sourcePlayerId": "playerId_2",
              "type": "powerBoost",
              "target": {
                "scope": "SELF",
                "zones": ["top", "left", "right"]
              },
              "value": 40,
              "priority": 0,
              "unremovable": false
            }
          ],
          "specialEffects": {},
          "calculatedPowers": {},
          "disabledCards": [],
          "victoryPointModifiers": 0
        }
      }
    },
    "zones": {
      "playerId_1": {
        "leader": {
          "id": "s-1",
          "name": "特朗普",
          "cardType": "leader",
          "gameType": "右翼",
          "initialPoint": 110,
          "level": 7,
          "rarity": "legendary",
          "zoneCompatibility": {
            "top": ["右翼", "自由", "經濟"],
            "left": ["右翼", "自由", "愛國者"],
            "right": ["右翼", "愛國者", "經濟"]
          },
          "effects": {
            "description": "全部召喚出來的角色擁有右翼或愛國者屬性能力值 +45。如對方領袖卡為「鮑威爾」，我方召喚出來擁有經濟屬性的原能力值變成 0",
            "rules": [
              {
                "id": "trump_rightWing_patriot_boost",
                "type": "continuous",
                "trigger": {
                  "event": "always",
                  "conditions": []
                },
                "target": {
                  "owner": "self",
                  "zones": ["top", "left", "right"],
                  "filters": [
                    {
                      "type": "gameTypeOr",
                      "values": ["右翼", "愛國者"]
                    }
                  ]
                },
                "effect": {
                  "type": "powerBoost",
                  "value": 45
                }
              },
              {
                "id": "trump_vs_powell_economy_nerf",
                "type": "continuous",
                "trigger": {
                  "event": "always",
                  "conditions": [
                    {
                      "type": "opponentLeader",
                      "value": "鮑威爾"
                    }
                  ]
                },
                "target": {
                  "owner": "self",
                  "zones": ["top", "left", "right"],
                  "filters": [
                    {
                      "type": "gameType",
                      "value": "經濟"
                    }
                  ]
                },
                "effect": {
                  "type": "setPower",
                  "value": 0
                }
              }
            ]
          }
        },
        "top": [],
        "left": [],
        "right": [],
        "help": [],
        "sp": []
      },
      "playerId_2": {
        "leader": {
          "id": "s-2",
          "name": "拜登",
          "cardType": "leader",
          "gameType": "左翼",
          "initialPoint": 100,
          "level": 7,
          "rarity": "legendary",
          "zoneCompatibility": {
            "top": ["左翼", "自由", "經濟", "右翼", "愛國者"],
            "left": ["左翼", "自由", "經濟", "右翼", "愛國者"],
            "right": ["左翼", "自由", "經濟", "右翼", "愛國者"]
          },
          "effects": {
            "description": "全部召喚出來的角色能力值 +40",
            "rules": [
              {
                "id": "biden_all_boost",
                "type": "continuous",
                "trigger": {
                  "event": "always",
                  "conditions": []
                },
                "target": {
                  "owner": "self",
                  "zones": ["top", "left", "right"],
                  "filters": []
                },
                "effect": {
                  "type": "powerBoost",
                  "value": 40
                }
              }
            ]
          }
        },
        "top": [],
        "left": [],
        "right": [],
        "help": [],
        "sp": []
      }
    },
    "gameEvents": [],
    "lastEventId": 0,
    "pendingPlayerAction": null,
    "pendingCardSelections": {},
    "playSequence": {
      "globalSequence": 2,
      "plays": [
        {
          "sequenceId": 1,
          "playerId": "playerId_1",
          "cardId": "s-1",
          "action": "PLAY_LEADER",
          "zone": "leader",
          "data": {
            "leaderIndex": 0,
            "isInjectedState": true
          },
          "timestamp": "2025-07-21T08:39:05.898Z",
          "turnNumber": 0,
          "phaseWhenPlayed": "MAIN_PHASE"
        },
        {
          "sequenceId": 2,
          "playerId": "playerId_2",
          "cardId": "s-2",
          "action": "PLAY_LEADER",
          "zone": "leader",
          "data": {
            "leaderIndex": 0,
            "isInjectedState": true
          },
          "timestamp": "2025-07-21T08:39:05.899Z",
          "turnNumber": 0,
          "phaseWhenPlayed": "MAIN_PHASE"
        }
      ]
    }
  },
  "playerActions": [
    {
      "step": 1,
      "description": "Player 1 attempts to place c-1 (總統特朗普, gameType: 愛國者) in TOP zone - SHOULD ERROR",
      "playerId": "playerId_1",
      "action": {
        "actionType": "PlayCard",
        "cardId": "c-1",
        "zone": "top"
      },
      "expectedResult": {
        "success": false,
        "errorExpected": "FIELD_EFFECT_RESTRICTION",
        "reason": "c-1 has gameType '愛國者' which is not allowed in TOP zone (允許: 右翼, 自由, 經濟)"
      }
    },
    {
      "step": 2,
      "description": "Player 1 places c-1 (總統特朗普, gameType: 愛國者) in LEFT zone - SHOULD SUCCEED",
      "playerId": "playerId_1",
      "action": {
        "actionType": "PlayCard",
        "cardId": "c-1",
        "zone": "left"
      },
      "expectedResult": {
        "success": true,
        "noError": true,
        "cardPlaced": true
      },
      "expectedEffects": [
        "c-1 triggers its own trait-based boost (+10 to 特朗普家族 trait)",
        "Trump leader effect applies +45 boost to 愛國者 gameType"
      ]
    }
  ],
  "expectedStateChanges": {
    "zones.playerId_1.left.length": 1,
    "players.playerId_1.deck.hand.length": 4,
    "playSequence.plays.length": 3,
    "currentTurn": 1,
    "currentPlayer": "playerId_2"
  },
  "validationPoints": {
    "playerId_1_card_c-1_power": {
      "description": "Validate c-1 power with all boosts applied",
      "expected": {
        "cardId": "c-1",
        "finalPower": 155,
        "displayPower": 155
      },
      "powerBreakdown": {
        "basePower": 100,
        "characterSelfBoost": 10,
        "trumpLeaderBoost": 45,
        "total": 155
      },
      "zoneLocation": "left"
    }
  },
  "errorCases": [
    {
      "description": "c-1 (愛國者) should be rejected from TOP zone",
      "playerId": "playerId_1",
      "action": {
        "actionType": "PlayCard",
        "cardId": "c-1",
        "zone": "top"
      },
      "expectedError": "FIELD_EFFECT_RESTRICTION",
      "errorDetails": {
        "zoneRestrictions": ["右翼", "自由", "經濟"],
        "cardGameType": "愛國者",
        "allowedInZone": false
      }
    }
  ],
  "cardDefinitions": {
    "c-1": {
      "name": "總統特朗普",
      "cardType": "character",
      "gameType": "愛國者",
      "power": 100,
      "traits": ["特朗普家族"],
      "effects": {
        "description": "我方場上全部擁有特朗普家族特徵的角色卡 原能力值加 +10",
        "rules": [
          {
            "id": "trump_president_boost",
            "type": "continuous",
            "trigger": {
              "event": "always",
              "conditions": []
            },
            "target": {
              "owner": "self",
              "zones": ["top", "left", "right"],
              "filters": [
                {
                  "type": "trait",
                  "value": "特朗普家族"
                }
              ]
            },
            "effect": {
              "type": "powerBoost",
              "value": 10
            }
          }
        ]
      }
    }
  },
  "testNotes": {
    "zoneCompatibility": "Trump leader (s-1) restricts TOP zone to [右翼, 自由, 經濟], but c-1 is 愛國者 gameType",
    "validZones": "c-1 (愛國者) is allowed in LEFT and RIGHT zones under Trump leader",
    "powerCalculation": "c-1 should receive: 100 (base) + 45 (Trump leader boost for 愛國者) + 10 (self trait boost) = 155",
    "expectedBehavior": "First action should error with zone restriction, second action should succeed with correct power display"
  }
}